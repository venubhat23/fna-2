<!-- Page Header -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="mb-1">Edit Banner</h2>
    <p class="text-muted mb-0">Update banner information and settings</p>
  </div>
  <div class="d-flex gap-2">
    <%= link_to admin_banner_path(@banner), class: "btn btn-outline-info" do %>
      <i class="bi bi-eye me-1"></i>
      View Banner
    <% end %>
    <%= link_to admin_banners_path, class: "btn btn-outline-secondary" do %>
      <i class="bi bi-arrow-left me-1"></i>
      Back to Banners
    <% end %>
  </div>
</div>

<!-- Current Banner Preview -->
<% if @banner.banner_image.attached? %>
<div class="card border-0 shadow-sm mb-4">
  <div class="card-header bg-transparent border-0">
    <h6 class="mb-0">Current Banner Preview</h6>
  </div>
  <div class="card-body text-center">
    <%= image_tag @banner.banner_image, class: "img-fluid rounded", style: "max-height: 200px;" %>
  </div>
</div>
<% end %>

<!-- Banner Form -->
<div class="card border-0 shadow-sm">
  <div class="card-header bg-transparent border-0">
    <h5 class="mb-0">Banner Information</h5>
  </div>
  <div class="card-body">
    <%= form_with model: [:admin, @banner], local: true, class: "row g-3" do |form| %>
      <!-- Display errors -->
      <% if @banner.errors.any? %>
        <div class="col-12">
          <div class="alert alert-danger">
            <h6 class="alert-heading">Please correct the following errors:</h6>
            <ul class="mb-0">
              <% @banner.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        </div>
      <% end %>

      <!-- Banner Title -->
      <div class="col-md-8">
        <%= form.label :title, class: "form-label" %>
        <%= form.text_field :title, class: "form-control", placeholder: "Enter banner title..." %>
        <div class="form-text">A descriptive title for the banner (max 255 characters)</div>
      </div>

      <!-- Display Order -->
      <div class="col-md-4">
        <%= form.label :display_order, class: "form-label" %>
        <%= form.number_field :display_order, class: "form-control", min: 0 %>
        <div class="form-text">Lower numbers display first</div>
      </div>

      <!-- Banner Description -->
      <div class="col-12">
        <%= form.label :description, class: "form-label" %>
        <%= form.text_area :description, rows: 3, class: "form-control", placeholder: "Enter banner description, tagline, or message..." %>
        <div class="form-text">Short description or message to display (max 500 characters)</div>
      </div>

      <!-- Banner Image -->
      <div class="col-md-6">
        <%= form.label :banner_image, "Banner Image", class: "form-label" %>
        <%= form.file_field :banner_image, class: "form-control", accept: "image/*" %>
        <div class="form-text">
          Upload new image to replace current one (JPG, PNG, or WEBP). Leave blank to keep current image.
        </div>
      </div>

      <!-- Redirect Link -->
      <div class="col-md-6">
        <%= form.label :redirect_link, class: "form-label" %>
        <%= form.url_field :redirect_link, class: "form-control", placeholder: "https://example.com/landing-page" %>
        <div class="form-text">Optional URL for more details or promotional landing page</div>
      </div>

      <!-- Display Start Date -->
      <div class="col-md-4">
        <%= form.label :display_start_date, class: "form-label" %>
        <%= form.date_field :display_start_date, class: "form-control" %>
        <div class="form-text">Date from which the banner should appear</div>
      </div>

      <!-- Display End Date -->
      <div class="col-md-4">
        <%= form.label :display_end_date, class: "form-label" %>
        <%= form.date_field :display_end_date, class: "form-control" %>
        <div class="form-text">Date after which the banner should stop displaying</div>
      </div>

      <!-- Display Location -->
      <div class="col-md-4">
        <%= form.label :display_location, class: "form-label" %>
        <%= form.select :display_location,
            options_for_select([
              ['Dashboard', 'dashboard'],
              ['Login Page', 'login'],
              ['Home Page', 'home'],
              ['Sidebar Ad', 'sidebar']
            ], @banner.display_location),
            { prompt: 'Select display location...' },
            { class: "form-select" } %>
        <div class="form-text">Where the banner should appear</div>
      </div>

      <!-- Status -->
      <div class="col-md-6">
        <div class="form-check form-switch">
          <%= form.check_box :status, class: "form-check-input" %>
          <%= form.label :status, "Active", class: "form-check-label" %>
        </div>
        <div class="form-text">Control banner visibility</div>
      </div>

      <!-- Form Actions -->
      <div class="col-12">
        <hr class="my-4">
        <div class="d-flex justify-content-between">
          <div>
            <%= button_to admin_banner_path(@banner),
                method: :delete,
                class: "btn btn-outline-danger",
                data: {
                  confirm: "Are you sure you want to delete this banner? This action cannot be undone."
                } do %>
              <i class="bi bi-trash me-1"></i>
              Delete Banner
            <% end %>
          </div>
          <div class="d-flex gap-2">
            <%= link_to "Cancel", admin_banner_path(@banner), class: "btn btn-outline-secondary" %>
            <%= form.submit "Update Banner", class: "btn btn-primary" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>