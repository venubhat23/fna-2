<!-- Page Header -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="mb-1">System Settings</h2>
    <p class="text-muted">Configure system-wide settings and preferences</p>
  </div>
  <div>
    <%= link_to admin_settings_user_roles_path, class: "btn btn-primary" do %>
      <i class="bi bi-person-gear me-1"></i>
      User Roles
    <% end %>
  </div>
</div>

<!-- Statistics Cards -->
<div class="row mb-4">
  <div class="col-xl-3 col-md-6 mb-3">
    <div class="card h-100 border-0 shadow-sm">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h6 class="text-muted mb-2">User Roles</h6>
            <h3 class="mb-0 text-primary"><%= UserRole.count %></h3>
          </div>
          <div class="bg-primary bg-opacity-10 rounded p-3">
            <i class="bi bi-person-badge text-primary fs-4"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-xl-3 col-md-6 mb-3">
    <div class="card h-100 border-0 shadow-sm">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h6 class="text-muted mb-2">Permission Roles</h6>
            <h3 class="mb-0 text-success"><%= Role.count %></h3>
          </div>
          <div class="bg-success bg-opacity-10 rounded p-3">
            <i class="bi bi-shield-check text-success fs-4"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-xl-3 col-md-6 mb-3">
    <div class="card h-100 border-0 shadow-sm">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h6 class="text-muted mb-2">Active Users</h6>
            <h3 class="mb-0 text-info"><%= User.where(status: true).count %></h3>
          </div>
          <div class="bg-info bg-opacity-10 rounded p-3">
            <i class="bi bi-people text-info fs-4"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-xl-3 col-md-6 mb-3">
    <div class="card h-100 border-0 shadow-sm">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h6 class="text-muted mb-2">Permissions</h6>
            <h3 class="mb-0 text-warning"><%= Permission.count %></h3>
          </div>
          <div class="bg-warning bg-opacity-10 rounded p-3">
            <i class="bi bi-key text-warning fs-4"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-8">
    <!-- Application Settings Card -->
    <div class="card border-0 shadow-sm mb-4">
      <div class="card-header bg-transparent border-0">
        <h5 class="mb-0">Application Settings</h5>
      </div>
      <div class="card-body">
        <!-- Pagination Settings -->
        <div class="mb-4">
          <h6 class="text-muted mb-3">Display Settings</h6>
          <%= form_with url: admin_settings_system_path, method: :patch, local: true do |form| %>
            <div class="row align-items-end">
              <div class="col-md-6">
                <label for="default_pagination_per_page" class="form-label">
                  <i class="bi bi-list-ol me-1"></i>
                  Items Per Page
                </label>
                <%= form.number_field :default_pagination_per_page,
                      value: @default_pagination_per_page,
                      min: 5,
                      max: 100,
                      class: "form-control",
                      placeholder: "Enter number (e.g., 10)" %>
                <div class="form-text">Number of items to display per page (5-100)</div>
              </div>
              <div class="col-md-3">
                <%= form.submit "Update", class: "btn btn-primary" %>
              </div>
            </div>
          <% end %>
        </div>

      </div>
    </div>

    <!-- System Information Card -->
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-transparent border-0">
        <h5 class="mb-0">System Information</h5>
      </div>
      <div class="card-body">

        <div class="table-responsive">
          <table class="table table-borderless mb-0">
            <tbody>
              <tr>
                <td class="text-muted" width="40%">Application Name</td>
                <td class="fw-medium"><%= @system_settings[:app_name] %></td>
              </tr>
              <tr>
                <td class="text-muted">Version</td>
                <td><span class="badge bg-primary"><%= @system_settings[:version] %></span></td>
              </tr>
              <tr>
                <td class="text-muted">Maintenance Mode</td>
                <td>
                  <% if @system_settings[:maintenance_mode] %>
                    <span class="badge bg-warning">Enabled</span>
                  <% else %>
                    <span class="badge bg-success">Disabled</span>
                  <% end %>
                </td>
              </tr>
              <tr>
                <td class="text-muted">Email Notifications</td>
                <td>
                  <% if @system_settings[:email_notifications] %>
                    <span class="badge bg-success">Enabled</span>
                  <% else %>
                    <span class="badge bg-secondary">Disabled</span>
                  <% end %>
                </td>
              </tr>
              <tr>
                <td class="text-muted">Backup Frequency</td>
                <td class="fw-medium"><%= @system_settings[:backup_frequency] %></td>
              </tr>
              <tr>
                <td class="text-muted">Session Timeout</td>
                <td class="fw-medium"><%= @system_settings[:session_timeout] %> minutes</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <!-- Quick Actions Card -->
    <div class="card border-0 shadow-sm mb-4">
      <div class="card-header bg-transparent border-0">
        <h5 class="mb-0">Quick Actions</h5>
      </div>
      <div class="card-body">
        <div class="d-grid gap-2">
          <%= link_to admin_settings_user_roles_path, class: "btn btn-outline-primary" do %>
            <i class="bi bi-person-gear me-2"></i>
            Manage User Roles
          <% end %>

          <%= link_to admin_roles_path, class: "btn btn-outline-secondary" do %>
            <i class="bi bi-shield-check me-2"></i>
            Roles & Permissions
          <% end %>

          <button class="btn btn-outline-secondary" disabled>
            <i class="bi bi-envelope me-2"></i>
            Email Settings
            <small class="text-muted">(Coming Soon)</small>
          </button>

          <button class="btn btn-outline-secondary" disabled>
            <i class="bi bi-database me-2"></i>
            Backup Settings
            <small class="text-muted">(Coming Soon)</small>
          </button>
        </div>
      </div>
    </div>

    <!-- Help Card -->
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-transparent border-0">
        <h5 class="mb-0">Need Help?</h5>
      </div>
      <div class="card-body">
        <p class="text-muted mb-3">Configure system-wide settings to customize your application behavior.</p>
        <div class="alert alert-info mb-0">
          <i class="bi bi-info-circle me-2"></i>
          <small>More configuration options will be available in future updates.</small>
        </div>
      </div>
    </div>
  </div>
</div>