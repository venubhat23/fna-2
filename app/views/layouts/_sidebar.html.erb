<style>
.modern-sidebar {
  position: fixed !important;
  top: 70px !important;
  left: 0 !important;
  width: 260px !important;
  height: calc(100vh - 70px) !important;
  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%) !important;
  border-right: 2px solid #e2e8f0 !important;
  z-index: 1040 !important;
  overflow: hidden !important;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1) !important;
  display: flex !important;
  flex-direction: column !important;
  backdrop-filter: blur(10px) !important;
}

.nav-link-modern {
  display: flex !important;
  align-items: center !important;
  padding: 12px 20px !important;
  margin: 6px 12px !important;
  border-radius: 16px !important;
  color: #64748b !important;
  font-weight: 500 !important;
  text-decoration: none !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  position: relative !important;
  overflow: hidden !important;
  background: rgba(248, 250, 252, 0.8) !important;
  border: 1px solid rgba(226, 232, 240, 0.8) !important;
}

.nav-link-modern::before {
  content: '' !important;
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  width: 4px !important;
  height: 100% !important;
  background: linear-gradient(to bottom, #3b82f6, #8b5cf6) !important;
  transform: scaleY(0) !important;
  transition: transform 0.3s ease !important;
}

.nav-link-modern:hover {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%) !important;
  color: #1e293b !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 12px 30px rgba(59, 130, 246, 0.15) !important;
  border: 1px solid rgba(59, 130, 246, 0.2) !important;
}

.nav-link-modern:hover::before {
  transform: scaleY(1) !important;
}

.nav-link-modern:hover .nav-text {
  color: #1e293b !important;
  font-weight: 600 !important;
}

.nav-link-modern.active {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%) !important;
  color: #ffffff !important;
  box-shadow: 0 12px 30px rgba(59, 130, 246, 0.3) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  transform: translateY(-2px) !important;
}

.nav-link-modern.active::before {
  transform: scaleY(1) !important;
  background: rgba(255, 255, 255, 0.3) !important;
}

.nav-link-modern.active .nav-text {
  color: #ffffff !important;
  font-weight: 600 !important;
}

.nav-link-modern.active .icon-bg {
  background: rgba(255, 255, 255, 0.2) !important;
  box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3) !important;
}

.nav-text {
  color: #64748b !important;
  font-weight: 500 !important;
  margin-left: 12px !important;
  font-size: 14px !important;
  display: inline-block !important;
  transition: all 0.3s ease !important;
}

.nav-section-title {
  color: #3b82f6 !important;
  font-size: 11px !important;
  font-weight: 700 !important;
  text-transform: uppercase !important;
  letter-spacing: 1px !important;
  padding: 20px 24px 8px 24px !important;
  margin-bottom: 8px !important;
  position: relative !important;
}

.nav-section-title::after {
  content: '' !important;
  position: absolute !important;
  bottom: 0 !important;
  left: 24px !important;
  width: 60px !important;
  height: 3px !important;
  background: linear-gradient(to right, #3b82f6, #8b5cf6) !important;
  border-radius: 2px !important;
}

.icon-bg {
  width: 36px !important;
  height: 36px !important;
  border-radius: 10px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: all 0.3s ease !important;
  position: relative !important;
}

.icon-bg::after {
  content: '' !important;
  position: absolute !important;
  inset: 1px !important;
  border-radius: 9px !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  transition: all 0.3s ease !important;
}

.nav-link-modern:hover .icon-bg {
  transform: scale(1.1) rotate(2deg) !important;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3) !important;
}

.nav-link-modern:hover .icon-bg::after {
  border-color: rgba(255, 255, 255, 0.3) !important;
}

.nav-link-modern.active .icon-bg {
  transform: scale(1.1) !important;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4) !important;
}

.nav-link-modern.active .icon-bg::after {
  border-color: rgba(255, 255, 255, 0.4) !important;
}

.user-name {
  color: #f8fafc !important;
  font-weight: 600 !important;
  text-shadow: 0 0 8px rgba(248, 250, 252, 0.3) !important;
}

/* Bright & Vibrant Gradient Backgrounds */
.gradient-blue {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%) !important;
  box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4) !important;
}
.gradient-green {
  background: linear-gradient(135deg, #10b981 0%, #34d399 100%) !important;
  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4) !important;
}
.gradient-purple {
  background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%) !important;
  box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4) !important;
}
.gradient-orange {
  background: linear-gradient(135deg, #f97316 0%, #fb923c 100%) !important;
  box-shadow: 0 6px 20px rgba(249, 115, 22, 0.4) !important;
}
.gradient-violet {
  background: linear-gradient(135deg, #a855f7 0%, #c084fc 100%) !important;
  box-shadow: 0 6px 20px rgba(168, 85, 247, 0.4) !important;
}
.gradient-emerald {
  background: linear-gradient(135deg, #059669 0%, #10b981 100%) !important;
  box-shadow: 0 6px 20px rgba(5, 150, 105, 0.4) !important;
}
.gradient-red {
  background: linear-gradient(135deg, #ef4444 0%, #f87171 100%) !important;
  box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4) !important;
}
.gradient-cyan {
  background: linear-gradient(135deg, #06b6d4 0%, #22d3ee 100%) !important;
  box-shadow: 0 6px 20px rgba(6, 182, 212, 0.4) !important;
}
.gradient-sky {
  background: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 100%) !important;
  box-shadow: 0 6px 20px rgba(14, 165, 233, 0.4) !important;
}
.gradient-yellow {
  background: linear-gradient(135deg, #fbbf24 0%, #fcd34d 100%) !important;
  box-shadow: 0 6px 20px rgba(251, 191, 36, 0.4) !important;
}
.gradient-teal {
  background: linear-gradient(135deg, #14b8a6 0%, #2dd4bf 100%) !important;
  box-shadow: 0 6px 20px rgba(20, 184, 166, 0.4) !important;
}
.gradient-indigo {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4) !important;
}
.gradient-amber {
  background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%) !important;
  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4) !important;
}
.gradient-lime {
  background: linear-gradient(135deg, #84cc16 0%, #a3e635 100%) !important;
  box-shadow: 0 6px 20px rgba(132, 204, 22, 0.4) !important;
}
.gradient-pink {
  background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%) !important;
  box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4) !important;
}
.gradient-rose {
  background: linear-gradient(135deg, #f43f5e 0%, #fb7185 100%) !important;
  box-shadow: 0 6px 20px rgba(244, 63, 94, 0.4) !important;
}
.gradient-gray {
  background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%) !important;
  box-shadow: 0 6px 20px rgba(107, 114, 128, 0.3) !important;
}

.sidebar-nav {
  padding: 1rem 0 !important;
  flex: 1 !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
}

.nav-section {
  margin-bottom: 1.5rem !important;
}

.nav-menu {
  list-style: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

.nav-item {
  margin-bottom: 4px !important;
}

.user-profile-modern {
  display: flex !important;
  align-items: center !important;
  padding: 1.5rem !important;
  border-bottom: 1px solid #2d3748 !important;
}

.avatar-circle {
  width: 40px !important;
  height: 40px !important;
  border-radius: 50% !important;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  color: white !important;
  margin-right: 12px !important;
}

.role-badge {
  background: linear-gradient(135deg, #06b6d4, #8b5cf6) !important;
  color: #ffffff !important;
  padding: 3px 10px !important;
  border-radius: 6px !important;
  font-size: 10px !important;
  font-weight: 600 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
  box-shadow: 0 2px 8px rgba(6, 182, 212, 0.3) !important;
}

.sidebar-footer {
  margin-top: auto !important;
  padding: 1rem !important;
  border-top: 1px solid #e2e8f0 !important;
  position: relative !important;
  flex-shrink: 0 !important;
  background: rgba(248, 250, 252, 0.8) !important;
  backdrop-filter: blur(10px) !important;
}

.sidebar-footer::before {
  content: '' !important;
  position: absolute !important;
  top: 0 !important;
  left: 20% !important;
  width: 60% !important;
  height: 2px !important;
  background: linear-gradient(to right, transparent, #06b6d4, #8b5cf6, transparent) !important;
}

.logout-btn-modern {
  display: flex !important;
  align-items: center !important;
  padding: 12px 16px !important;
  border-radius: 12px !important;
  color: #f87171 !important;
  text-decoration: none !important;
  width: 100% !important;
  transition: all 0.3s ease !important;
  background: rgba(248, 113, 113, 0.05) !important;
  border: 1px solid rgba(248, 113, 113, 0.2) !important;
}

.logout-btn-modern:hover {
  background: linear-gradient(135deg, rgba(248, 113, 113, 0.15), rgba(251, 113, 133, 0.15)) !important;
  color: #ffffff !important;
  transform: translateX(4px) !important;
  box-shadow: 0 6px 20px rgba(248, 113, 113, 0.3) !important;
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.4) !important;
}

.logout-btn-modern .nav-text {
  margin-left: 12px !important;
  font-weight: 500 !important;
}

.main-content {
  margin-left: 260px !important;
  margin-top: 70px !important;
  padding: 2rem !important;
}

/* Dropdown and Submenu Styles */
.dropdown-arrow {
  transition: transform 0.3s ease !important;
  font-size: 12px !important;
  color: #64748b !important;
}

.dropdown-toggle[aria-expanded="true"] .dropdown-arrow {
  transform: rotate(90deg) !important;
  color: #3b82f6 !important;
}

.submenu {
  margin-left: 1rem !important;
  margin-top: 0.5rem !important;
  border-left: 2px solid #e2e8f0 !important;
  transition: all 0.3s ease !important;
}

.submenu-list {
  list-style: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

.submenu-link {
  padding: 8px 16px !important;
  margin: 2px 8px !important;
  border-radius: 8px !important;
  background: transparent !important;
  border: none !important;
  display: flex !important;
  align-items: center !important;
  font-size: 13px !important;
  transition: all 0.2s ease !important;
}

.submenu-link:hover {
  background: rgba(59, 130, 246, 0.1) !important;
  color: #3b82f6 !important;
  transform: translateX(4px) !important;
}

.submenu-link.active {
  background: rgba(59, 130, 246, 0.15) !important;
  color: #3b82f6 !important;
  font-weight: 600 !important;
}

.submenu-bullet {
  margin-right: 8px !important;
  font-size: 16px !important;
  color: #64748b !important;
  transition: color 0.2s ease !important;
}

.submenu-link:hover .submenu-bullet,
.submenu-link.active .submenu-bullet {
  color: #3b82f6 !important;
}

.submenu-link.disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
}

.submenu-link.disabled:hover {
  background: transparent !important;
  transform: none !important;
}

.dropdown-menu-item .nav-link-modern {
  position: relative !important;
}

.dropdown-toggle:hover .dropdown-arrow {
  color: #3b82f6 !important;
}
</style>

<div class="modern-sidebar" id="sidebar" data-controller="sidebar">
  <!-- Sidebar Toggle Button for Mobile -->
  <button class="sidebar-toggle d-lg-none" onclick="toggleSidebar()">
    <i class="bi bi-list"></i>
  </button>



  <!-- Navigation Menu -->
  <nav class="sidebar-nav">
    <!-- Main Menu Section -->
    <div class="nav-section">
      <div class="nav-section-title">Main Menu</div>
      <ul class="nav-menu">
        <!-- Dashboard -->
        <% if current_user.has_sidebar_permission?('dashboard') %>
          <li class="nav-item">
            <%= link_to root_path, class: "nav-link-modern #{'active' if current_page?(root_path)}" do %>
              <div class="nav-icon-modern">
                <div class="icon-bg gradient-blue">
                  <i class="bi bi-grid-3x3-gap-fill"></i>
                </div>
              </div>
              <span class="nav-text">Dashboard</span>
              <div class="nav-indicator"></div>
            <% end %>
          </li>
        <% end %>





      </ul>
    </div>

    <!-- Bookings Section -->
    <div class="nav-section">
      <div class="nav-section-title">Sales</div>
      <ul class="nav-menu">
        <!-- Bookings (merged with Orders) -->
        <% if current_user.has_sidebar_permission?('bookings') %>
        <li class="nav-item">
          <%= link_to admin_bookings_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/bookings') || request.path.include?('/admin/orders')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-teal">
                <i class="bi bi-cart-check-fill"></i>
              </div>
            </div>
            <span class="nav-text">Bookings</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>
        <!-- Stores -->
        <% if current_user.has_sidebar_permission?('stores') %>
        <li class="nav-item">
          <%= link_to admin_stores_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/stores')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-orange">
                <i class="bi bi-shop"></i>
              </div>
            </div>
            <span class="nav-text">Stores</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>
      </ul>
    </div>

    <!-- Subscription Section -->
    <div class="nav-section">
      <div class="nav-section-title">Subscription</div>
      <ul class="nav-menu">
        <!-- Customer Format -->
        <% if current_user.has_sidebar_permission?('customer_formats') %>
        <li class="nav-item">
          <%= link_to admin_customer_formats_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/customer_formats')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-indigo">
                <i class="bi bi-clipboard-data"></i>
              </div>
            </div>
            <span class="nav-text">Customer Format</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>

        <!-- Subscriptions -->
        <% if current_user.has_sidebar_permission?('subscriptions') %>
        <li class="nav-item">
          <%= link_to admin_subscriptions_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/subscriptions')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-purple">
                <i class="bi bi-arrow-repeat"></i>
              </div>
            </div>
            <span class="nav-text">Subscriptions</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>

        <!-- Invoices -->
        <% if current_user.has_sidebar_permission?('invoices') %>
        <li class="nav-item">
          <%= link_to admin_invoices_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/invoices')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-cyan">
                <i class="bi bi-receipt"></i>
              </div>
            </div>
            <span class="nav-text">Invoices</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>

        <!-- Last Month Pending Amount -->
        <% if current_user.has_sidebar_permission?('pending_amounts') %>
        <li class="nav-item">
          <%= link_to admin_pending_amounts_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/pending_amounts')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-red">
                <i class="bi bi-exclamation-triangle-fill"></i>
              </div>
            </div>
            <span class="nav-text">Last Month Pending</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>
      </ul>
    </div>

    <!-- Inventory Section -->
    <div class="nav-section">
      <div class="nav-section-title">Inventory</div>
      <ul class="nav-menu">
        <!-- Vendors -->
        <% if current_user.has_sidebar_permission?('vendors') %>
        <li class="nav-item">
          <%= link_to admin_vendors_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/vendors')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-indigo">
                <i class="bi bi-building"></i>
              </div>
            </div>
            <span class="nav-text">Vendors</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>
        <!-- Vendor Purchases -->
        <% if current_user.has_sidebar_permission?('vendor_purchases') %>
        <li class="nav-item dropdown-menu-item">
          <a href="#" class="nav-link-modern dropdown-toggle #{'active' if request.path.include?('/admin/vendor_purchases')}" data-bs-toggle="collapse" data-bs-target="#vendorPurchasesSubmenu" aria-expanded="false">
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-emerald">
                <i class="bi bi-receipt-cutoff"></i>
              </div>
            </div>
            <span class="nav-text">Vendor Purchase</span>
            <span class="dropdown-arrow ms-auto">
              <i class="bi bi-chevron-down"></i>
            </span>
          </a>
          <div class="submenu collapse" id="vendorPurchasesSubmenu">
            <ul class="submenu-list">
              <li>
                <%= link_to new_admin_vendor_purchase_path, class: "submenu-link #{'active' if current_page?(new_admin_vendor_purchase_path)}" do %>
                  <span class="submenu-bullet">•</span>
                  <span>New Purchase</span>
                <% end %>
              </li>
              <li>
                <%= link_to admin_vendor_purchases_path, class: "submenu-link #{'active' if current_page?(admin_vendor_purchases_path)}" do %>
                  <span class="submenu-bullet">•</span>
                  <span>Purchase History</span>
                <% end %>
              </li>
              <li>
                <%= link_to batch_inventory_admin_vendor_purchases_path, class: "submenu-link #{'active' if current_page?(batch_inventory_admin_vendor_purchases_path)}" do %>
                  <span class="submenu-bullet">•</span>
                  <span>Batch Inventory</span>
                <% end %>
              </li>
            </ul>
          </div>
        </li>
        <% end %>
      </ul>
    </div>

    <!-- Master Data Section -->
    <div class="nav-section">
      <div class="nav-section-title">Master Data</div>
      <ul class="nav-menu">
        <!-- Customers -->
        <% if current_user.has_sidebar_permission?('customers') %>
          <li class="nav-item">
            <%= link_to admin_customers_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/customers')}" do %>
              <div class="nav-icon-modern">
                <div class="icon-bg gradient-green">
                  <i class="bi bi-people-fill"></i>
                </div>
              </div>
              <span class="nav-text">Customers</span>
              <div class="nav-indicator"></div>
            <% end %>
          </li>
        <% end %>

        <!-- Categories -->
        <% if current_user.has_sidebar_permission?('categories') %>
          <li class="nav-item">
            <%= link_to admin_categories_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/categories')}" do %>
              <div class="nav-icon-modern">
                <div class="icon-bg gradient-amber">
                  <i class="bi bi-tags-fill"></i>
                </div>
              </div>
              <span class="nav-text">Categories</span>
              <div class="nav-indicator"></div>
            <% end %>
          </li>
        <% end %>

        <!-- Products -->
        <% if current_user.has_sidebar_permission?('products') %>
          <li class="nav-item">
            <%= link_to admin_products_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/products')}" do %>
              <div class="nav-icon-modern">
                <div class="icon-bg gradient-sky">
                  <i class="bi bi-box-seam-fill"></i>
                </div>
              </div>
              <span class="nav-text">Products</span>
              <div class="nav-indicator"></div>
            <% end %>
          </li>
        <% end %>

        <!-- Coupons -->
        <% if current_user.has_sidebar_permission?('coupons') %>
          <li class="nav-item">
            <%= link_to admin_coupons_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/coupons')}" do %>
              <div class="nav-icon-modern">
                <div class="icon-bg gradient-red">
                  <i class="bi bi-percent"></i>
                </div>
              </div>
              <span class="nav-text">Coupons</span>
              <div class="nav-indicator"></div>
            <% end %>
          </li>
        <% end %>

        <!-- Customer Wallets -->
        <% if current_user.has_sidebar_permission?('customer_wallets') %>
          <li class="nav-item">
            <%= link_to admin_customer_wallets_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/customer_wallets')}" do %>
              <div class="nav-icon-modern">
                <div class="icon-bg gradient-emerald">
                  <i class="bi bi-wallet2"></i>
                </div>
              </div>
              <span class="nav-text">Customer Wallets</span>
              <div class="nav-indicator"></div>
            <% end %>
          </li>
        <% end %>

        <!-- Franchise -->
        <% if current_user.has_sidebar_permission?('franchises') %>
          <li class="nav-item">
            <%= link_to admin_franchises_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/franchises')}" do %>
              <div class="nav-icon-modern">
                <div class="icon-bg gradient-indigo">
                  <i class="bi bi-shop"></i>
                </div>
              </div>
              <span class="nav-text">Franchise</span>
              <div class="nav-indicator"></div>
            <% end %>
          </li>
        <% end %>

        <!-- Affiliate -->
        <% if current_user.has_sidebar_permission?('affiliates') %>
          <li class="nav-item">
            <%= link_to admin_affiliates_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/affiliates')}" do %>
              <div class="nav-icon-modern">
                <div class="icon-bg gradient-purple">
                  <i class="bi bi-person-badge"></i>
                </div>
              </div>
              <span class="nav-text">Affiliate</span>
              <div class="nav-indicator"></div>
            <% end %>
          </li>
        <% end %>

        <!-- Subscription Templates -->
        <%# TODO: Uncomment when SubscriptionTemplatesController is created %>
        <%# if current_user.has_sidebar_permission?('subscription_templates') %>
          <%# <li class="nav-item"> %>
            <%#= link_to admin_subscription_templates_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/subscription_templates')}" do %>
              <%# <div class="nav-icon-modern"> %>
                <%# <div class="icon-bg gradient-teal"> %>
                  <%# <i class="bi bi-clipboard-data"></i> %>
                <%# </div> %>
              <%# </div> %>
              <%# <span class="nav-text">Subscription Templates</span> %>
              <%# <div class="nav-indicator"></div>
            <%# end %>
          <%# </li> %>
        <%# end %>
      </ul>
    </div>

    <!-- Delivery Management Section -->
    <div class="nav-section">
      <div class="nav-section-title">Delivery Management</div>
      <ul class="nav-menu">
        <!-- Delivery People -->
        <% if current_user.has_sidebar_permission?('delivery_people') %>
        <li class="nav-item">
          <%= link_to admin_delivery_people_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/delivery_people')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-lime">
                <i class="bi bi-bicycle"></i>
              </div>
            </div>
            <span class="nav-text">Delivery People</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>
      </ul>
    </div>

    <!-- Import & Export Section -->
    <div class="nav-section">
      <div class="nav-section-title">Import & Export</div>
      <ul class="nav-menu">
        <!-- Import Data -->
        <% if current_user.has_sidebar_permission?('imports') %>
        <li class="nav-item">
          <%= link_to admin_imports_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/imports')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-blue">
                <i class="bi bi-upload"></i>
              </div>
            </div>
            <span class="nav-text">Import Data</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>
      </ul>
    </div>

    <!-- Settings & Configuration Section -->
    <div class="nav-section">
      <div class="nav-section-title">Settings & Configuration</div>
      <ul class="nav-menu">
        <!-- System Settings -->
        <% if current_user.has_sidebar_permission?('system_settings') %>
        <li class="nav-item">
          <%= link_to admin_settings_system_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/settings/system')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-violet">
                <i class="bi bi-gear-fill"></i>
              </div>
            </div>
            <span class="nav-text">System Settings</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>

        <!-- User Roles -->
        <% if current_user.has_sidebar_permission?('user_roles') %>
        <li class="nav-item">
          <%= link_to "/admin/settings/user_roles", class: "nav-link-modern #{'active' if request.path.include?('/admin/settings/user_roles')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-indigo">
                <i class="bi bi-person-badge-fill"></i>
              </div>
            </div>
            <span class="nav-text">User Roles</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>

        <!-- Banners -->
        <% if current_user.has_sidebar_permission?('banners') %>
        <li class="nav-item">
          <%= link_to admin_banners_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/banners')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-pink">
                <i class="bi bi-image-fill"></i>
              </div>
            </div>
            <span class="nav-text">Banners</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>

        <!-- Client Requests -->
        <% if current_user.has_sidebar_permission?('client_requests') %>
        <li class="nav-item">
          <%= link_to admin_client_requests_path, class: "nav-link-modern #{'active' if request.path.include?('/admin/client_requests')}" do %>
            <div class="nav-icon-modern">
              <div class="icon-bg gradient-cyan">
                <i class="bi bi-envelope-open-fill"></i>
              </div>
            </div>
            <span class="nav-text">Client Requests</span>
            <div class="nav-indicator"></div>
          <% end %>
        </li>
        <% end %>
      </ul>
    </div>




  </nav>

  <!-- Logout Section - Moved outside nav to be fixed at bottom -->
  <div class="sidebar-footer">
    <%= link_to destroy_user_session_path, method: :delete, class: "logout-btn-modern" do %>
      <div class="nav-icon-modern">
        <div class="icon-bg gradient-gray">
          <i class="bi bi-box-arrow-right"></i>
        </div>
      </div>
      <span class="nav-text">Logout</span>
    <% end %>
  </div>
</div>